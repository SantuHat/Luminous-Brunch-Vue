import"../modulepreload-polyfill-3cfb730f.js";import{n as i}from"../navbar-8febd334.js";const{createApp:a}=Vue,e=a({data(){return{products:[],apiUrl:"https://vue3-course-api.hexschool.io/v2",apiPath:"luminous",myModal:"",modalDel:"",temProduct:{},pages:{},isNew:!1}},components:{navbar:i},methods:{getProducts(t=1){const o=`${this.apiUrl}/api/${this.apiPath}/admin/products?page=${t}`;axios.get(o).then(s=>{this.products=s.data.products,this.pages=s.data.pagination,console.log(s)})},updateProduct(){let t=`${this.apiUrl}/api/${this.apiPath}/admin/product`,o="post";this.isNew||(t=`${this.apiUrl}/api/${this.apiPath}/admin/product/${this.temProduct.id}`,o="put"),axios[o](t,{data:this.temProduct}).then(s=>{this.getProducts(),this.hideModal(),this.temProduct={}}).catch(s=>{alert(s.data.message)})},dleProduct(){const t=`${this.apiUrl}/api/${this.apiPath}/admin/product/${this.temProduct.id}`;axios.delete(t).then(o=>{this.getProducts(),this.modalDel.hide()})},check(){const t=`${this.apiUrl}/api/user/check`;axios.post(t).then(o=>{o.data.success||(window.location="login.html")}).catch(()=>{window.location="login.html"})},openModal(t,o){t==="new"?(this.temProduct={},this.isNew=!0,this.myModal.show()):t==="edit"?(this.temProduct={...o},this.isNew=!1,this.myModal.show()):t==="del"&&(this.temProduct={...o},this.modalDel.show())},hideModal(){this.myModal.hide()}},mounted(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");axios.defaults.headers.common.Authorization=t,this.myModal=new bootstrap.Modal(this.$refs.productModal),this.modalDel=new bootstrap.Modal(this.$refs.delProductModal),this.getProducts()}});e.mount("#app");
